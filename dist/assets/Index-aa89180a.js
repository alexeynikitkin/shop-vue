import{_ as f,r as x,o as i,c as a,a as t,F as k,b as w,f as h,w as p,g as c,i as v,m as g,h as d,d as _,t as r,e as C}from"./index-1113b426.js";const S={name:"Index",mounted(){$(document).trigger("changed"),this.getProductsCart(),localStorage.getItem("user_logged")!=null?(this.getLoggedInUser(),this.discounts=this.user.discounts):this.discounts=[],console.log(this.user),console.log("Discounts",this.discounts)},data(){return{products:[],name:"",address:"",email:"",user:"",discounts:"",totalDisc:null}},computed:{totalPrice(){let o=0;return localStorage.getItem("cart")!=null&&this.products.forEach(s=>{o+=s.price*s.qty}),o}},methods:{getProductsCart(){localStorage.getItem("cart")!=null&&(this.products=JSON.parse(localStorage.getItem("cart")))},minusQty(o){o.qty>1&&o.qty--,this.updateCart()},plusQty(o){let s=o.stock,m=o.qty;s>m&&o.qty++,this.updateCart()},removeProduct(o){this.products=this.products.filter(s=>s.id!==o),this.updateCart(),window.location.reload()},updateCart(){localStorage.setItem("cart",JSON.stringify(this.products)),$(".cart-icon span").text(this.products.length)},storeOrder(){this.axios.post("https://karte.studiopresto.dev/api/orders",{products:this.products,name:this.name,email:this.email,address:this.address,total_price:this.totalPrice,total_disc:this.totalDisc}).then(o=>{this.products=[],localStorage.removeItem("cart");let s=o.data.replace("int(1)","");window.location.replace(s)}).finally(o=>{$(document).trigger("changed")})},storeOrderLoggedIn(){this.axios.post("https://karte.studiopresto.dev/api/orders",{products:this.products,name:this.user.name,email:this.user.email,address:this.user.address,total_price:this.totalPrice,total_disc:this.totalDisc}).then(o=>{this.products=[],localStorage.removeItem("cart");let s=o.data.replace("int(1)","");window.location.replace(s)}).finally(o=>{$(document).trigger("changed")})},getLoggedInUser(){localStorage.getItem("user_logged")!=null&&(this.user=JSON.parse(localStorage.getItem("user_logged")))},applyCoupon(){$(".cart-total-box .price, .cart-check-out-list .price-sub").text(this.totalPrice-this.discounts[0].value),$(".cart-check-out-list .price").text(this.totalPrice-this.discounts[0].value+50),this.totalDisc=this.totalPrice-this.discounts[0].value,this.axios.post("https://karte.studiopresto.dev/api/discount",{discount_id:this.discounts[0].id}).then(o=>{console.log(o),$(".coupon-button").text("Applied"),$(".coupon-button").css("pointer-events","none"),$(".coupon-times").text($(".coupon-times").attr("data-value")-1)}).finally(o=>{$(document).trigger("changed")})},getProductFromCart(o){if(localStorage.getItem("cart")){var s=JSON.parse(localStorage.getItem("cart")).filter(b=>b.id==o);return Object.keys(s).length>0?s[0].qty:0}}}},I={class:"overflow-hidden"},P=C('<section class="breadcrumb-area" style="background-image:url(src/assets/images/inner-pages/breadcum-bg.png);"><div class="container"><div class="row"><div class="col-xl-12"><div class="breadcrumb-content text-center wow fadeInUp animated"><h2>Cart</h2><div class="breadcrumb-menu"><ul><li><a href="index.html"><i class="flaticon-home pe-2"></i>Home</a></li><li><i class="flaticon-next"></i></li><li class="active">Cart</li></ul></div></div></div></div></div></section>',1),q={class:"cart-area pt-120 pb-120"},U={class:"container"},N={class:"row wow fadeInUp animated"},O={class:"col-xl-12 col-lg-12 col-md-12 col-sm-12"},V={class:"cart-table-box"},Q={class:"table-outer"},D={class:"cart-table"},F=t("thead",{class:"cart-header"},[t("tr",null,[t("th",{class:""},"Product Name"),t("th",{class:"price"},"Price"),t("th",null,"Attributes"),t("th",null,"Quantity"),t("th",null,"Subtotal"),t("th",{class:"hide-me"})])],-1),L={class:"thumb-box"},A=["src","alt"],E=t("br",null,null,-1),J=t("br",null,null,-1),T={class:"qty"},B=["data-stock","data-cart-qty"],z=["onClick"],M=t("i",{class:"flaticon-minus"},null,-1),j=[M],H=["value"],G=["onClick"],K=t("i",{class:"flaticon-plus"},null,-1),R=[K],W={class:"sub-total"},X=["onClick"],Y=t("i",{class:"flaticon-cross"},null,-1),Z=[Y],tt={class:"row"},st={key:0,class:"col-xl-12"},et={class:"cart-button-box"},ot={class:"cart-button-box-right wow fadeInUp animated"},lt={key:1,class:"col-xl-12"},it={key:0,class:"row w-25"},at={key:0,class:"cart-button-box"},ct={key:1,class:"cart-button-box"},nt={key:1,class:"row pt-120"},rt=t("div",{class:"col-xl-6 col-lg-7 wow fadeInUp animated"},[t("div",{class:"cart-total-box"},[t("div",{class:"inner-title"},[t("h3",null,"Cart Totals")])])],-1),dt=[rt],ut={key:2,class:"row mt--30"},ht={class:"col-xl-6 col-lg-7 wow fadeInUp animated"},pt={class:"cart-total-box mt-30"},_t={class:"table-outer"},mt={class:"cart-table2"},vt={class:"cart-header clearfix"},gt={key:0,class:"apply-coupon wow fadeInUp animated"},bt={class:"apply-coupon-input-box mt-30"},yt=["data-value"],ft={class:"apply-coupon-button mt-30"},xt=t("th",{colspan:"1",class:"shipping-title"},"Price with Coupon",-1),kt={class:"price"},wt={class:"col-xl-6 col-lg-5 wow fadeInUp animated"},Ct={class:"cart-check-out mt-30"},St=t("h3",null,"Check Out",-1),It={class:"cart-check-out-list"},Pt=t("div",{class:"left"},[t("p",null,"Subtotal")],-1),qt={class:"right"},Ut={class:"price-sub"},Nt=t("li",null,[t("div",{class:"left"},[t("p",null,"Shipping")]),t("div",{class:"right"},[t("p",null,[t("span",null,"Flat rate:"),c(" $50.00")])])],-1),Ot=t("div",{class:"left"},[t("p",null,"Total Price:")],-1),Vt={class:"right"},Qt={class:"price"};function Dt(o,s,m,b,l,n){const u=x("router-link");return i(),a("div",null,[t("main",I,[P,t("section",q,[t("div",U,[t("div",N,[t("div",O,[t("div",V,[t("div",Q,[t("table",D,[F,t("tbody",null,[(i(!0),a(k,null,w(l.products,e=>(i(),a("tr",null,[t("td",null,[t("div",L,[h(u,{to:{name:"products.show",params:{id:e.id}},class:"thumb"},{default:p(()=>[t("img",{src:e.image_url,alt:e.title},null,8,A)]),_:2},1032,["to"]),h(u,{to:{name:"products.show",params:{id:e.id}},class:"title"},{default:p(()=>[t("h5",null,r(e.title),1)]),_:2},1032,["to"])])]),t("td",null,"$"+r(e.price),1),t("td",null,[c("Size - "+r(e.size),1),E,c("Color - "+r(e.color),1),J]),t("td",T,[t("div",{class:"qtySelector text-center","data-stock":e.stock,"data-cart-qty":n.getProductFromCart(e.id)},[t("span",{onClick:d(y=>n.minusQty(e),["prevent"]),class:"decreaseQty"},j,8,z),t("input",{type:"number",class:"qtyValue",value:e.qty},null,8,H),t("span",{onClick:d(y=>n.plusQty(e),["prevent"]),class:"increaseQty"},R,8,G)],8,B)]),t("td",W,"$"+r(e.price*e.qty),1),t("td",null,[t("div",{onClick:d(y=>n.removeProduct(e.id),["prevent"]),class:"remove"},Z,8,X)])]))),256))])])])])])]),t("div",tt,[l.products.length>0?(i(),a("div",st,[t("div",et,[t("div",ot,[h(u,{to:{name:"products.index"},class:"btn--primary mt-30",type:"submit"},{default:p(()=>[c("Continue Shopping")]),_:1},8,["to"])])])])):(i(),a("div",lt,[c(" Empty Cart "),h(u,{to:{name:"products.index"},class:"btn--primary mt-30",type:"submit"},{default:p(()=>[c("Continue Shopping")]),_:1},8,["to"])]))]),l.products.length>0?(i(),a("div",it,[l.user==""?(i(),a("div",at,[v(t("input",{type:"text",name:"name","onUpdate:modelValue":s[0]||(s[0]=e=>l.name=e),placeholder:"Name"},null,512),[[g,l.name]]),v(t("input",{type:"text",name:"email","onUpdate:modelValue":s[1]||(s[1]=e=>l.email=e),placeholder:"Email"},null,512),[[g,l.email]]),v(t("input",{type:"text",name:"address","onUpdate:modelValue":s[2]||(s[2]=e=>l.address=e),placeholder:"Address"},null,512),[[g,l.address]]),t("input",{onClick:s[3]||(s[3]=d(e=>n.storeOrder(),["prevent"])),type:"submit",class:"btn btn--primary style2",value:"Submit"})])):(i(),a("div",ct,[t("input",{onClick:s[4]||(s[4]=d(e=>n.storeOrderLoggedIn(),["prevent"])),type:"submit",class:"btn btn--primary style2",value:"Submit"})]))])):_("",!0),l.products.length>0?(i(),a("div",nt,dt)):_("",!0),l.products.length>0?(i(),a("div",ut,[t("div",ht,[t("div",pt,[t("div",_t,[t("table",mt,[t("thead",vt,[t("tr",null,[t("th",null,[t("div",null,[l.discounts.length>0?(i(),a("div",gt,[t("div",bt,[t("p",null,[c("U have coupon for "),t("span",{class:"coupon-times","data-value":l.discounts[0].times},r(l.discounts[0].times),9,yt),c(" times with discount $"+r(l.discounts[0].value),1)])]),t("div",ft,[t("button",{onClick:s[5]||(s[5]=d(e=>n.applyCoupon(),["prevent"])),class:"btn--primary style2 coupon-button",type:"submit"},"Apply Coupon")])])):_("",!0)])])]),t("tr",null,[xt,t("th",null,[c("$"),t("span",kt,r(n.totalPrice),1)])])])])])])]),t("div",wt,[t("div",Ct,[St,t("ul",It,[t("li",null,[Pt,t("div",qt,[t("p",null,[c("$"),t("span",Ut,r(n.totalPrice),1)])])]),Nt,t("li",null,[Ot,t("div",Vt,[t("p",null,[c("$"),t("span",Qt,r(n.totalPrice+50),1)])])])])])])])):_("",!0)])])])])}const Lt=f(S,[["render",Dt]]);export{Lt as default};
